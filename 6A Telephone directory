
CREATE TABLE tbl_telephone (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    phone_number VARCHAR(15) NOT NULL,
    email VARCHAR(100),
    address VARCHAR(255)
);

//HOME PAGE 
<%@ page contentType="text/html" pageEncoding="UTF-8" %>
<!DOCTYPE html>
<html>
<head>
    <title>Telephone Directory</title>
</head>
<body>

<ul>
    <li><a href="add.jsp">Add Record</a></li>
    <li><a href="viewContacts.jsp">View All Contacts</a></li>
    <li><a href="searchContact.jsp">Search Contact</a></li>
</ul>

</body>
</html>


//ADD CONTACT FORM 
<%@ page contentType="text/html" pageEncoding="UTF-8" %>
<!DOCTYPE html>
<html>
<head>
    <title>Add Contact</title>
</head>
<body>

<h2>Welcome to Telephone Directory</h2>

<form action="addContact.jsp" method="POST">
    Name: <input type="text" name="txtName" required><br><br>
    Contact: <input type="text" name="txtPhone" required><br><br>
    Email: <input type="email" name="txtEmail"><br><br>
    Address: <input type="text" name="txtAddress"><br><br>
    <input type="submit" value="Add Contact">
</form>

</body>
</html>


//INSERT RECORD 

<%@ page import="java.sql.*" %>
<%@ page contentType="text/html" pageEncoding="UTF-8" %>

<!DOCTYPE html>
<html>
<head>
    <title>Insert Status</title>
</head>
<body>

<%
String name = request.getParameter("txtName");
String phone = request.getParameter("txtPhone");
String email = request.getParameter("txtEmail");
String address = request.getParameter("txtAddress");

Connection con = null;
PreparedStatement pstmt = null;

try {
    Class.forName("com.mysql.jdbc.Driver");
    con = DriverManager.getConnection(
        "jdbc:mysql://localhost:3306/telephone_db", "root", "Root123");

    String sql = "INSERT INTO tbl_telephone(name, phone_number, email, address) VALUES (?, ?, ?, ?)";
    pstmt = con.prepareStatement(sql);

    pstmt.setString(1, name);
    pstmt.setString(2, phone);
    pstmt.setString(3, email);
    pstmt.setString(4, address);

    int rowsAffected = pstmt.executeUpdate();

    if (rowsAffected > 0) {
        out.println("<p style='color:green;'>Contact added successfully!</p>");
    }

} catch (Exception e) {
    out.println("<p style='color:red;'>Error: " + e.getMessage() + "</p>");
} finally {
    if (pstmt != null) pstmt.close();
    if (con != null) con.close();
}
%>

<br>
<a href="index.jsp">Add another contact</a>

</body>
</html>


//VIEW ALL CONTACTS 
<%@ page import="java.sql.*" %>
<!DOCTYPE html>
<html>
<head>
    <title>All Contacts</title>
</head>
<body>

<h2>All Contacts</h2>

<%
try {
    Class.forName("com.mysql.jdbc.Driver");
    Connection conn = DriverManager.getConnection(
        "jdbc:mysql://localhost:3306/telephone_db", "root", "Root123");

    Statement stmt = conn.createStatement();
    ResultSet rs = stmt.executeQuery("SELECT * FROM tbl_telephone");

    out.println("<table border='1'>");
    out.println("<tr><th>ID</th><th>Name</th><th>Phone</th><th>Email</th><th>Address</th></tr>");

    while (rs.next()) {
        out.println("<tr>");
        out.println("<td>" + rs.getInt("id") + "</td>");
        out.println("<td>" + rs.getString("name") + "</td>");
        out.println("<td>" + rs.getString("phone_number") + "</td>");
        out.println("<td>" + rs.getString("email") + "</td>");
        out.println("<td>" + rs.getString("address") + "</td>");
        out.println("</tr>");
    }

    out.println("</table>");

    rs.close();
    stmt.close();
    conn.close();

} catch (Exception e) {
    out.println("<p style='color:red;'>Error: " + e.getMessage() + "</p>");
}
%>

</body>
</html>



//SEARCH FORM 

<!DOCTYPE html>
<html>
<head>
    <title>Search Contact</title>
</head>
<body>

<h2>Search Contact</h2>

<form action="viewRecord.jsp" method="GET">
    Name: <input type="text" name="name">
    <input type="submit" value="Search">
</form>

</body>
</html>


//SEARCH RESULT

<%@ page import="java.sql.*" %>
<!DOCTYPE html>
<html>
<head>
    <title>Search Result</title>
</head>
<body>

<h2>Search Result</h2>

<%
String name = request.getParameter("name");

try {
    Class.forName("com.mysql.jdbc.Driver");
    Connection conn = DriverManager.getConnection(
        "jdbc:mysql://localhost:3306/telephone_db", "root", "Root123");

    String sql = "SELECT * FROM tbl_telephone WHERE name LIKE ?";
    PreparedStatement pst = conn.prepareStatement(sql);
    pst.setString(1, "%" + name + "%");

    ResultSet rs = pst.executeQuery();

    out.println("<table border='1'>");
    out.println("<tr><th>ID</th><th>Name</th><th>Phone</th><th>Email</th><th>Address</th></tr>");

    while (rs.next()) {
        out.println("<tr>");
        out.println("<td>" + rs.getInt("id") + "</td>");
        out.println("<td>" + rs.getString("name") + "</td>");
        out.println("<td>" + rs.getString("phone_number") + "</td>");
        out.println("<td>" + rs.getString("email") + "</td>");
        out.println("<td>" + rs.getString("address") + "</td>");
        out.println("</tr>");
    }

    out.println("</table>");

    rs.close();
    pst.close();
    conn.close();

} catch (Exception e) {
    out.println("<p style='color:red;'>Error: " + e.getMessage() + "</p>");
}
%>

</body>
</html>



